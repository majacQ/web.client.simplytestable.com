<!--
<div class="results">
    <a href="{{ path('app_test_redirector', {'website': test['website'], 'test_id':test['id']}) }}">
        <span class="badge badge-{{ test['state_label_class'] }}">
            <i class="icon state-icon {{ test['state_icon'] }}"></i>  #{{ test['id'] }} <i class="icon action-icon icon-caret-right"></i>
        </span>
    </a>
</div>
-->

<div class="address">
<a href="{{ path('app_progress', {'website': test['website'], 'test_id':test['id']}) }}">
    <span class="badge badge-{{ test['state_label_class'] }}"><i class="icon state-icon {{ test['state_icon'] }}"></i></span>{{ test['website_label'] }}        
    <span class="btn-wrapper">
        <span class="btn-spacer"></span>
        <span class="btn btn-mini">View progress <i class="icon icon-caret-right"></i></span>   
    </span>        
        
        <!--
        <span class="badge badge-{{ test['state_label_class'] }}">
            <i class="icon state-icon {{ test['state_icon'] }}"></i>  #{{ test['id'] }} <i class="icon action-icon icon-caret-right"></i>
        </span>
        -->
</a>    
</div>



{% if test.state == 'crawling' %}
<div class="row-fluid meta">
    <div class="span4 total">
        <span class="test-count">{{ test.crawl.processed_url_count }}</span><span class="subtext">pages checked</span>
    </div>
    <div class="span4 total">
        <span class="test-count">{{ test.crawl.discovered_url_count }}</span><span class="subtext">urls found</span>
    </div>
    <div class="span4 detail">        
        <div>
            {% if test.crawl.state == 'completed' or test.crawl.state == 'cancelled' %}
                <span class="caption">crawled</span>
            {% else %}
                <span class="caption">crawling &hellip;</span>
            {% endif %}
        </div>
    </div>        
</div>
<div class="row-fluid">
    <div class="span12">
        <div class="progress progress-striped">
            <div class="bar bar-success" style="width:{{ test['completion_percent'] }}%;"></div>
        </div>
    </div>
</div>
{% else %}
<div class="row-fluid meta">
    <div class="span6 total">
        <span class="test-count">{{ test['task_count'] }}</span><span class="subtext">tests</span>
    </div>       
    <div class="span6 detail">
        <div>
            <span class="queued-count figure">{{ test['task_count_by_state']['queued'] + test['task_count_by_state']['queued-for-assignment'] }}</span>
            <span class="caption">queued</span>
        </div>
        <div>
            <span class="in-progress-count figure">{{ test['task_count_by_state']['in-progress'] }}</span>
            <span class="caption">in progress</span>
        </div>
        <div>
            <span class="finished-count figure">{{ test['task_count_by_state']['cancelled'] + test['task_count_by_state']['completed'] + test['task_count_by_state']['awaiting-cancellation'] + test['task_count_by_state']['failed-no-retry-available'] + test['task_count_by_state']['failed-retry-available'] + test['task_count_by_state']['failed-retry-limit-reached'] + test['task_count_by_state']['skipped'] }}</span>
            <span class="caption">finished</span>
        </div>
    </div>
</div>

<div class="row-fluid">
    <div class="span12">
        <div class="progress progress-striped active">
            <div class="bar" style="width:{{ test['completion_percent'] }}%;"></div>
        </div>
    </div>
</div>
{% endif %}