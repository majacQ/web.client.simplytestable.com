{% extends 'SimplyTestableWebClientBundle::App/base.html.twig' %}

{% block title %}Your card details ({{ user.username }}) - {{ parent() }}{% endblock %}

{% block javascripts %}
<script type="text/javascript" src="https://js.stripe.com/v2/"></script>
<script type="text/javascript">
    Stripe.setPublishableKey('{{ stripe_publishable_key }}');
</script>
{{ parent() }}
{% endblock %} 

{% block body_class %} account {{ parent() }}{% endblock %}


{% block main %}
    <div class="row-fluid">
        <div class="span12">
            <h1>Your card details</h1>
        </div>
    </div>
    <div class="row-fluid">        
        <form method="post" class="form-horizontal" id="payment-form" action={{ path('user_account_card_associate', {'stripe_card_token' : 'stripe_card_token'}) }}>
            <div class="span6">
                <div class="control-group">
                    <label class="control-label"></label>
                    <div class="controls">
                        <h2>Cardholder</h2>
                    </div>
                </div>                

                <div class="control-group">
                    <label class="control-label" for="inputFirstName">Name</label>
                    <div class="controls">
                        <input value="{% if card.name is defined %}{{ card.name }}{% endif %}" class="span12" type="text" id="inputFirstName" placeholder="Name" data-stripe="name">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputStreetAddress">Street address</label>
                    <div class="controls">
                        <input value="{% if card.address_line1 is defined %}{{ card.address_line1 }}{% endif %}" class="span12" type="text" id="inputStreetAddress" placeholder="Steet address" data-stripe="address_line1">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputCity">City</label>
                    <div class="controls">
                        <input value="{% if card.address_city is defined %}{{ card.address_city }}{% endif %}" type="text" id="inputCity" placeholder="City" data-stripe="address_city">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputState">State or County</label>
                    <div class="controls">
                        <input value="{% if card.address_state is defined %}{{ card.address_state }}{% endif %}" type="text" id="inputState" placeholder="State or County" data-stripe="address_state">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputZip">Zip or postal code</label>
                    <div class="controls">
                        <input value="{% if card.address_zip is defined %}{{ card.address_zip }}{% endif %}" type="text" id="inputZip" placeholder="Zip or postal code" data-stripe="address_zip">
                    </div>
                </div>                    
                <div class="control-group">
                    <label class="control-label" for="inputCountry">Country</label>
                    <div class="controls">                        
                        <select data-stripe="address_country">
                            {% for country_code, country_name in countries %}
                                {% if card.address_country is defined %}
                                <option {% if card.address_country == country_code %}selected{% endif%} value="{{ country_code }}">{{ country_name }}</option>                             
                                {% else %}
                                <option {% if country_code == 'GB' %}selected{% endif%} value="{{ country_code }}">{{ country_name }}</option>                             
                                {% endif %}                              
                            {% endfor %}
                        </select>                        
                    </div>
                </div>                            
                <div class="control-group">
                    <div class="controls">
                        <button type="submit" class="btn">
                            {% if card|length == 0 %}
                                Add
                            {% else %}
                                Update
                            {% endif %}
                            card
                        </button>
                    </div>
                </div>            
            </div>            
            <div class="span6">

                <div class="control-group">
                    <label class="control-label"></label>
                    <div class="controls">
                        <h2>Credit card</h2>
                        <p>
                            We accept Visa and Mastercard credit and debit cards.
                        </p>
                    </div>
                </div>                

                <div class="control-group">
                    <label class="control-label" for="inputNumber">Number</label>
                    <div class="controls">
                        <input class="span12" type="text" id="inputNumber" placeholder="15 or 16 digits across the front" data-stripe="number">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputExpiryMonth">Expiry date</label>
                    <div class="controls">
                        <select class="span4" id="inputExpiryMonth" data-stripe="exp_month">
                            <option value="00">Month</option>
                            <option value="01">January</option>
                            <option value="02">February</option>
                            <option value="03">March</option>
                            <option value="04">April</option>
                            <option value="05">May</option>
                            <option value="06">June</option>
                            <option value="07">July</option>
                            <option value="08">August</option>
                            <option value="09">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select> 
                          
                        <select class="span3" data-stripe="exp_year">
                            <option>Year</option>
{% for year in expiry_year_start..expiry_year_end %}
                            <option>{{ year }}</option>
{% endfor %}
                        </select>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputCVC">CVC</label>
                    <div class="controls">
                        <input type="text" id="inputCVC" placeholder="" class="span3" data-stripe="cvc"><span class="help-inline">Usually 3 digits on the back</span>
                    </div>
                </div>                
            </div>            


        </form>
    </div>
{% endblock %}