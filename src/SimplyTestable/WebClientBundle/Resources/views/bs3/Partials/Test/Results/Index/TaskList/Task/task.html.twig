{% set state_to_icon_map = {
    'completed':'bar-chart-o',
    'queued':'cog',
    'queued-for-assignment':'cog',
    'in-progress':'cogs',
    'skipped':'random',
    'cancelled':'circle-dot-o',
    'failed':'ban',
    'failed-no-retry-availabl':'remove-circle',
    'failed-retry-available':'remove-circle',
    'failed-retry-limit-reached':'remove-circle',
} %}

{% set use_link = task.hasOutput and task.state not in ignore_results_states and task.output.hasErrors or task.output.hasWarnings %}

{% if use_link %}
    <a class="meta"  href="{{ path('view_test_task_results_index_index', { 'website': test.website, 'test_id': test.testId, 'task_id':task.taskId }) }}">
{% else %}
    <span class="meta">
{% endif %}

<span class="state"><i class="fa fa-fw fa-{{ state_to_icon_map[task.state] }}"></i></span>
<span class="type">{{ task.type }}</span>

{% if task.hasOutput %}
    {% include 'SimplyTestableWebClientBundle:bs3/Partials/Test/Results/Index/TaskList/Task/SummaryLabels:summary-labels.html.twig' %}
{% endif %}

{% if not use_link %}
    </span>
{% else %}
    </a>
{% endif %}